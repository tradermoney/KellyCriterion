# 帮助提示功能增强说明

## 概述
本次更新为凯利公式计算器增加了全面的帮助提示系统，为所有重要字段和指标添加了详细的问号提示，并完全兼容中英文国际化（i18n）。

## 主要改进

### 1. 扩展的翻译系统 (`src/i18n/translations.ts`)

在翻译文件中新增了 `help` 对象，包含以下类别的详细帮助文本：

#### 基础参数 (8个)
- `initialWealth` - 初始资金
- `rounds` - 仿真轮数
- `winProb` - 胜率
- `odds` - 赔率
- `feeRate` - 手续费率
- `fMax` - 最大下注比例
- `ruinThreshold` - 破产阈值
- `paths` - 路径数

#### 策略类型 (6个)
- `kelly` - 凯利公式
- `fractionalKelly` - 分数凯利
- `fixedFraction` - 固定比例
- `fixedStake` - 固定注金
- `paroli` - Paroli策略
- `martingale` - Martingale策略

#### 统计指标 - 基础绩效 (5个)
- `meanFinal` - 平均最终资金
- `median` - 中位数
- `expectedReturn` - 期望收益率
- `logReturn` - 对数收益
- `profitablePaths` - 盈利路径

#### 统计指标 - 风险 (5个)
- `std` - 标准差
- `maxDrawdown` - 最大回撤
- `ruinRate` - 破产率
- `percentile5` - 5%分位数
- `min` - 最小值

#### 统计指标 - 分布 (4个)
- `percentile25` - 25%分位数
- `percentile75` - 75%分位数
- `percentile95` - 95%分位数
- `max` - 最大值

#### 控制面板 (3个)
- `simulationControl` - 仿真控制面板
- `startSimulation` - 开始仿真
- `autoSave` - 自动保存结果

#### 表格分类 (4个)
- `basicPerformance` - 基础绩效指标
- `riskMetrics` - 风险指标
- `distributionMetrics` - 分布指标
- `strategy` - 策略

#### 策略参数 (5个)
- `alphaParam` - Alpha系数（凯利分数）
- `fFixedParam` - 固定比例
- `baseParam` - 固定注金/基础注金
- `rParam` - 增长倍数（Paroli策略）
- `strategyCard` - 策略卡片

**总计：40个详细的帮助提示文本，全部支持中英文双语！**

### 2. 更新的组件

#### `ParameterPanel.tsx`
- 为所有参数输入框添加了帮助提示
- 使用 `t.help.xxx` 访问国际化的帮助文本
- 包括：初始资金、路径数、胜率、赔率、手续费率、最大下注比例

#### `StatisticsTable.tsx`
- 为三个统计表格的所有表头添加了帮助提示
- 基础绩效指标表：6个字段（策略、平均最终资金、中位数、期望收益率、对数收益、盈利路径）
- 风险指标表：6个字段（策略、标准差、最大回撤、破产率、5%分位数、最小值）
- 分布指标表：6个字段（策略、25%分位数、中位数、75%分位数、95%分位数、最大值）

#### `ControlPanel.tsx`
- 为"自动保存结果"功能添加了帮助提示
- 导入了 `HelpTooltip` 组件

#### `StrategySelector.tsx` （新增）
- 为策略卡片标题添加了帮助提示
- 为所有策略参数添加了详细的帮助提示：
  - 分数凯利：Alpha系数（凯利分数）
  - 固定比例：固定比例百分比
  - 固定注金：固定注金金额
  - Paroli策略：基础注金 + 增长倍数
  - Martingale策略：基础注金 + 风险警告
- 完善了 Paroli 和 Martingale 策略的参数配置界面
- 为 Martingale 策略添加了醒目的风险警告提示

### 3. 帮助文本的特点

每个帮助文本都包含：
1. **字段名称** - 清晰的字段标识
2. **定义说明** - 该指标的准确定义
3. **计算方法** - 如何计算该指标（如适用）
4. **实际意义** - 该指标在投资决策中的意义
5. **使用建议** - 如何解读和应用该指标

示例（中文）：
```
初始资金：仿真开始时的初始资金量，默认为100单位。这是所有策略的起始资金基础，所有收益和风险指标都以此为基准计算。
```

示例（英文）：
```
Initial Wealth: The starting capital amount for simulation, default is 100 units. This is the baseline for all strategies, and all return and risk metrics are calculated based on this value.
```

### 4. 用户体验改进

#### 视觉设计
- 帮助按钮为圆形，带有 `?` 标识
- 鼠标悬停或点击时显示帮助提示框
- 提示框带有阴影和箭头指示器
- 深色模式完美兼容

#### 交互设计
- 支持鼠标悬停显示
- 支持点击切换显示/隐藏
- 提示框宽度固定为 `16rem` (256px)，确保内容可读性
- 文字大小适中，行高舒适

#### 国际化支持
- 所有帮助文本完全支持中英文切换
- 与系统语言设置保持一致
- 切换语言时帮助文本自动更新

## 技术实现

### 类型安全
TypeScript 类型系统自动推断 `t.help` 的所有属性，提供完整的类型检查和自动补全。

### 组件复用
`HelpTooltip` 组件高度可复用，支持两种使用方式：
1. 直接传递内容：`<HelpTooltip content="帮助文本" />`
2. 使用 i18n key：`<HelpTooltip helpKey="wealthCurve" />`（用于图表）

### 维护性
- 所有帮助文本集中在 `translations.ts` 中管理
- 便于统一修改和更新
- 新增字段时只需在翻译文件中添加对应的帮助文本

## 影响范围

### 修改的文件
1. `src/i18n/translations.ts` - 新增 40 个帮助文本（中英文共 80 条）
2. `src/components/ParameterPanel.tsx` - 6 个参数添加帮助提示
3. `src/components/StatisticsTable.tsx` - 18 个表头添加帮助提示
4. `src/components/ControlPanel.tsx` - 1 个功能添加帮助提示
5. `src/components/StrategySelector.tsx` - 添加策略参数帮助提示和完善参数配置界面

### 新增的文件
无（所有功能都基于现有的 `HelpTooltip` 组件和翻译系统）

### 新增功能
1. **Paroli 策略参数配置**：基础注金和增长倍数的滑块调整
2. **Martingale 策略参数配置**：基础注金的滑块调整 + 风险警告
3. **策略卡片帮助提示**：解释策略卡片的用途和操作方法

## 未来扩展建议

1. ~~**策略选择器**：为策略选择器中的每种策略类型添加帮助提示~~ ✅ 已完成
2. ~~**参数配置**：为策略参数（alpha, fFixed, k等）添加详细说明~~ ✅ 已完成
3. **图表面板**：确保所有 29 个图表都有帮助提示（已在 `chartHelpTexts.ts` 中定义）
4. **策略选择卡片**：为策略选择区域的每个策略选项添加更详细的帮助提示
5. **导出功能**：为导出选项添加说明（CSV、JSON、图表的区别和用途）
6. **移动端优化**：考虑在移动端使用不同的提示展示方式（如底部弹出面板）
7. **交互式教程**：考虑添加首次使用的引导教程

## 测试建议

1. **功能测试**
   - 鼠标悬停是否正确显示提示框
   - 点击是否能切换显示状态
   - 深色模式下样式是否正常

2. **国际化测试**
   - 切换语言后帮助文本是否正确更新
   - 中英文内容是否准确且易懂

3. **兼容性测试**
   - 不同浏览器中的显示效果
   - 移动端的显示效果
   - 不同屏幕尺寸下的布局

4. **可用性测试**
   - 帮助文本是否足够清晰
   - 专业术语是否需要进一步解释
   - 是否需要添加更多示例

## 总结

本次更新大幅提升了应用的用户友好度，特别是对于不熟悉金融术语和统计指标的用户。通过详细的帮助提示，用户可以：
- 更好地理解每个参数的含义
- 正确解读统计结果
- 做出更明智的投资决策

所有改进都完全兼容现有的国际化系统，保持了代码的一致性和可维护性。

