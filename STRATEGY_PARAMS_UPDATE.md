# 策略参数配置更新说明

## 更新概述

本次更新为策略选择器添加了完整的参数配置界面和详细的帮助提示，特别是补充了 Paroli 和 Martingale 策略的参数配置。

## 主要改进

### 1. 新增策略参数配置界面

#### Paroli 策略（正向马丁格尔）
- **基础注金**：范围 1-50 元，默认 1 元
- **增长倍数**：范围 1.5-5 倍，默认 2 倍
- 说明：连胜时按倍数增长下注金额

#### Martingale 策略（马丁格尔）
- **基础注金**：范围 1-50 元，默认 1 元
- 新增：⚠️ 高风险警告提示
- 说明：连亏时加倍下注，极高风险

### 2. 完善的帮助提示系统

每个策略参数都配有详细的帮助文本：

#### Alpha 系数（分数凯利）
```
Alpha系数（凯利分数）：分数凯利策略的保守系数，取值0.1-1.0。
实际下注比例 = 凯利公式计算值 × Alpha。
Alpha=0.5表示使用半凯利（Half Kelly），波动性和回撤降低约50%，但收益也相应减少。
建议风险厌恶型投资者使用0.25-0.5的Alpha值。
```

#### 固定比例
```
固定比例：每次下注占当前资金的固定百分比，取值1%-50%。
例如10%表示当前有100元时下注10元，有200元时下注20元。
这是一种简单的资金管理方法，但不考虑胜率和赔率的变化。
建议保守投资者使用5%-10%的比例。
```

#### 固定注金/基础注金
```
固定注金：每次下注的固定金额，不随资金变化。
例如设定为10元，则无论当前资金是100还是1000，每次都下注10元。
优点是简单明了，缺点是资金少时风险大，资金多时收益有限。
适合小额测试或非常保守的投资者。
```

#### 增长倍数（Paroli）
```
增长倍数：连胜时下注金额的增长倍数。
例如设为2时，连胜会按2倍递增（base → 2×base → 4×base...）。
倍数越大，连胜时收益越高，但连胜后若失败则亏损也更大。
建议使用2-3倍较为稳健。
```

### 3. 用户体验优化

#### 视觉提示
- 所有参数都带有问号图标，方便获取帮助
- Martingale 策略有醒目的红色风险警告框
- 参数值实时显示，便于用户了解当前设置

#### 交互优化
- 使用滑块控件，直观易用
- 参数范围合理，防止极端值
- 深色模式完美兼容

## 技术细节

### 修改的文件
1. `src/i18n/translations.ts`
   - 新增 5 个策略参数帮助文本（中英文）
   
2. `src/components/StrategySelector.tsx`
   - 添加 Paroli 策略参数配置界面
   - 添加 Martingale 策略参数配置界面
   - 为所有策略参数添加帮助提示
   - 完善策略初始化逻辑

### 代码示例

#### Paroli 策略参数配置
```tsx
{strategy.type === 'paroli' && (
  <div className="bg-slate-50 dark:bg-slate-800 rounded-md p-1.5 space-y-1">
    {/* 基础注金 */}
    <label className="block">
      <span className="flex items-center gap-1">
        基础注金 (¥{strategy.params?.base || 1})
        <HelpTooltip content={t.help.baseParam} />
      </span>
      <input type="range" min="1" max="50" step="1" ... />
    </label>
    
    {/* 增长倍数 */}
    <label className="block">
      <span className="flex items-center gap-1">
        增长倍数 ({strategy.params?.r || 2}x)
        <HelpTooltip content={t.help.rParam} />
      </span>
      <input type="range" min="1.5" max="5" step="0.5" ... />
    </label>
  </div>
)}
```

#### Martingale 策略风险警告
```tsx
{strategy.type === 'martingale' && (
  <div className="bg-slate-50 dark:bg-slate-800 rounded-md p-1.5 space-y-0.5">
    {/* 基础注金配置 */}
    <label className="block">...</label>
    
    {/* 风险警告 */}
    <div className="mt-1 px-2 py-1 bg-red-50 dark:bg-red-900/20 
                    border border-red-200 dark:border-red-800/50 rounded 
                    text-xs text-red-600 dark:text-red-400">
      ⚠️ 高风险策略，可能快速破产
    </div>
  </div>
)}
```

## 参数范围说明

| 策略 | 参数 | 范围 | 默认值 | 步长 |
|------|------|------|--------|------|
| 分数凯利 | Alpha系数 | 0.1-1.0 | 0.5 | 0.1 |
| 固定比例 | 固定比例 | 0.01-0.5 (1%-50%) | 0.1 (10%) | 0.01 |
| 固定注金 | 固定注金 | 1-100 | 10 | 1 |
| Paroli | 基础注金 | 1-50 | 1 | 1 |
| Paroli | 增长倍数 | 1.5-5 | 2 | 0.5 |
| Martingale | 基础注金 | 1-50 | 1 | 1 |

## 国际化支持

所有帮助文本完全支持中英文切换：

### 中文示例
- Alpha系数（凯利分数）
- 固定比例
- 基础注金
- 增长倍数

### 英文示例
- Alpha Coefficient (Kelly Fraction)
- Fixed Fraction
- Fixed Stake / Base Stake
- Growth Multiplier

## 使用建议

### 保守型投资者
- **分数凯利**：Alpha = 0.25-0.5
- **固定比例**：5%-10%
- **避免使用**：Martingale 策略

### 稳健型投资者
- **分数凯利**：Alpha = 0.5-0.75
- **固定比例**：10%-15%
- **Paroli**：基础注金小，增长倍数 2-3 倍

### 激进型投资者
- **凯利公式**：使用完整凯利
- **分数凯利**：Alpha = 0.75-1.0
- **Paroli**：可尝试更高增长倍数

### ⚠️ 不推荐策略
- **Martingale**：理论上能保证盈利，但实践中极易破产，连续亏损几次就可能资金归零

## 测试建议

1. **功能测试**
   - 添加不同策略，检查参数配置界面是否正确显示
   - 调整参数滑块，确认数值实时更新
   - 切换语言，验证帮助文本正确切换

2. **边界测试**
   - 测试参数的最小值和最大值
   - 验证步长是否合理
   - 检查极端参数下的仿真结果

3. **用户体验测试**
   - 帮助提示是否清晰易懂
   - 参数范围是否合理
   - Martingale 风险警告是否醒目

## 总结

本次更新完善了策略选择器的参数配置功能，特别是：

✅ 新增 Paroli 策略完整参数配置  
✅ 新增 Martingale 策略参数配置和风险警告  
✅ 为所有策略参数添加详细的帮助提示  
✅ 完全支持中英文国际化  
✅ 优化用户体验和视觉反馈  

用户现在可以：
- 直观地调整每个策略的参数
- 通过帮助提示了解参数的含义和建议值
- 看到 Martingale 策略的风险警告
- 轻松对比不同参数配置的效果

所有改进都保持了代码的一致性和可维护性！


